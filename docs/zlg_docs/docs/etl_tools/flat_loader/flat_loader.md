---
title: FLAT_Loader
sidebar_position: 1
---

# FLAT_Loader

The FLAT_Loader is the core element of enabling non-openEHR-experienced persons to import data into the framework and therefore make their data interoperable and available.

## What exactly is the FLAT_Loader?

Put flat the FLAT_Loader is a collection of scripts that perform specific tasks that are needed to impor data into an openEHR-Repository. It assumes that the data is already modelled and a valid Operational Template (OPT) is available to the user. For experienced ETL-Persons it not much of a problem to transform the data - those persons should check out the [Plain-Python-ETL](./plain_python_etl.md)-Section of the Manual. In this section the setup, configuration and usage of the FLAT_Loader will be described.

## Why should i use the FLAT_Loader?
Building valid openEHR-Compositions is a tedious task depending on the extent of the concept/template that needs to be served. The FLAT_Loader allows you to transform data using a user-supplied Mapping. The Mapping - in form of an Excel-File - allows you to map columns of your data set in a CSV-File to related data fields in a specific openEHR-Template. The visual representation of the mapping that is generated by the FLAT-Loader may help users to perform better in the Mapping-Task.

## Tool Usage Steps

![ETL Process with FLAT_Loader](/img/00_etl_process_openEHR_py-svg.png)

First:
> - Place your .OPT-File in the "OPTs"-Folder   
> 
> - Place your CSV-File with your data in the "ETLProcess/Input"-Folder

Second:
> - In the `config.ini` set
>   - the `templatename` of the OPT 
>   - the `inputcsv`-Name of the Data-CSV
>
> - Also provide the `targetrepoadress` and `targetauthheader` to the openEHR-Repository you want to use/communicate with.
>   - The Repo-Adress may look like: `<IP:Port>/ehrbase`
>   - The Authentication uses Basic Auth as Default. 
>     - For username:`ehrbase-user` and `SuperSecretPassword` the auth-Header would be in Base64-Representation: `Basic ZWhyYmFzZS11c2VyOlN1cGVyU2VjcmV0UGFzc3dvcmQ=`

Third:
> - Run Step0 - a setup Step that uploads the OPT-File to the openEHR-Repository
> 

This is need since the tool uploads the canonical OPT to the server to then query the FLAT-WebTemplate which holds the FLAT-Paths needed for the Mapping.

Fourth:
> - Run Step1 - to create the Mapping-File
>
> - Fill out the Mapping by setting a column for every Path/Template-Attribute that shall contain data

Fifth:
> - Run Step 2 - to build the compositions (stored in `ETLProcess/Output`) and upload them to the repository.

---
[![Creative Commons Attribution-ShareAlike 4.0 International License](https://i.creativecommons.org/l/by-sa/4.0/88x31.png "Creative Commons Attribution-ShareAlike 4.0 International License")](http://creativecommons.org/licenses/by-sa/4.0/)